Сброс пароля
============

Процедура сброса пароля состоит из двух этапов: запрос и подтверждение.

Запрос сброса пароля предполагает ввод пользователем его e-mail'а. На
почту пользователю отправляется письмо с инструкциями. В письме есть
как ссылка для подтверждения, так и отдельно токен подтверждения.
У пользователя есть выбор: либо перейти по ссылке из письма, либо
использовать токен подтверждения в форме приложения.

Подтверждение сброса требует токен подтверждения, который пользователь
узнал из письма, полученного на первом этапе.

**Замечание:** Токен подтверждения имеет ограниченный срок жизни и может
быть использован только один раз. При повторе запроса сброса все
предыдущие токены подтверждения данного пользователя аннулируются.


Запрос сброса пароля
--------------------

**ВАЖНО:** Требуется авторизация токеном с [разрешением][scopes]: `SignUp`.

### Запрос

`POST /api/v2/password-reset-request`

В теле запроса передаются следующие поля:

Параметр | Тип    | По умолчанию    | Описание
-------- | ------ | --------------- | --------
`mail`   | строка | **Обязательно** | E-mail

### Ответ

Поле      | Тип
--------- | -------
`success` | boolean


### Пример

Запрос:

    POST /api/v2/password-reset-request HTTP/1.1
    Host: app.cubux.net
    Authorization: Bearer bd21026244e41a126d69f15ea9d1ac76579f69e3
    Content-Type: application/json; charset=UTF-8
    Content-Length: 26

    {
        "mail": "foo@example.net"
    }

Ответ:

    HTTP/1.1 200 OK
    Content-Length: 58
    Content-Type: application/json; charset=UTF-8

    {
        "success": true
    }


Подтверждение сброса пароля
---------------------------

### Запрос

`POST /api/v2/password-reset-confirm`

В теле запроса передаются следующие поля:

Параметр | Тип    | По умолчанию    | Описание
-------- | ------ | --------------- | -------------------
`token`  | строка | **Обязательно** | Токен подтверждения

### Ответ

Поле      | Тип
--------- | -------
`success` | boolean

### Пример

Запрос:

    POST /api/v2/password-reset-confirm HTTP/1.1
    Host: app.cubux.net
    Authorization: Bearer bd21026244e41a126d69f15ea9d1ac76579f69e3
    Content-Type: application/json; charset=UTF-8
    Content-Length: 55

    {
        "token": "-KjbsxAbq1_tyT5w-CHHjUpyhL-w6oWO_1461565792"
    }

Ответ:

    HTTP/1.1 200 OK
    Content-Length: 58
    Content-Type: application/json; charset=UTF-8

    {
        "success": true
    }


[scopes]: ../auth/scopes.md
